{"version":3,"sources":["webpack:///D:/workspace-uniapp/HM/pages/hotelManage/components/employeeConmponent.vue?6595","webpack:///D:/workspace-uniapp/HM/pages/hotelManage/components/employeeConmponent.vue?d0ad","webpack:///D:/workspace-uniapp/HM/pages/hotelManage/components/employeeConmponent.vue?45cb","webpack:///D:/workspace-uniapp/HM/pages/hotelManage/components/employeeConmponent.vue?8299","uni-app:///pages/hotelManage/components/employeeConmponent.vue","webpack:///D:/workspace-uniapp/HM/pages/hotelManage/components/employeeConmponent.vue?58b3","webpack:///D:/workspace-uniapp/HM/pages/hotelManage/components/employeeConmponent.vue?8a43"],"names":["components","addEmployeeComponent","data","submitLoading","accordionVal","type","emObj","computed","isPcShow","hotel_id","hotel","employeeList","created","console","watch","methods","sortRoomList","getEmployeeList","uni","DB","then","catch","editEmployee","url","JSON","addEmployee","deleteEmployee","title","content","cancelText","confirmText","conf","_id","employee","closePopup"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+H;AAC/H;AACsE;AACL;AACc;;;AAG/E;AAC+K;AAC/K,gBAAgB,sLAAU;AAC1B,EAAE,wFAAM;AACR,EAAE,6FAAM;AACR,EAAE,sGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,iGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,gQAEN;AACP,KAAK;AACL;AACA,aAAa,8OAEN;AACP,KAAK;AACL;AACA,aAAa,8OAEN;AACP,KAAK;AACL;AACA,aAAa,8OAEN;AACP,KAAK;AACL;AACA,aAAa,2RAEN;AACP,KAAK;AACL;AACA,aAAa,yTAEN;AACP,KAAK;AACL;AACA,aAAa,kRAEN;AACP,KAAK;AACL;AACA,aAAa,gQAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACpEA;AAAA;AAAA;AAAA;AAA2qB,CAAgB,yqBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;ACkI/rB;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eACA;EACAA;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA,wCACA;QAAA;MAAA,EACA;IACA;IACAC;MACA;IACA;EACA;EACAC;IACAC;IAEA;EACA;EACAC;IACAL;MACA;IACA;EACA;EACAM;IACAC;IACAC;MAAA;MACAC;MACAC;QACAV;MACA,GACAW;QACA;QACAF;MACA,GACAG;QACAR;QACAK;MACA;IACA;IACAI;MACA;MACA;MACA;QACA;QACA;MACA;MAEAJ;QACAK,+DACA,2BACAC;MACA;IACA;IACAC;MACA;MACA;QACA;QACA;MACA;MAEAP;QACAK;MACA;IACA;IACAG;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACAR;kBACAS;kBACAC;kBACAC;kBACAC;gBACA;cAAA;gBALAC;gBAAA,KAMAA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAGA;gBACAb;gBACAC;kBACAa;kBACAC;gBACA,GACAb;kBACAP;kBACA;kBACA;kBACA;gBAEA,GACAQ;kBACAR;kBACA;kBACAK;kBACAA;oBACAU;oBACAE;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAI;MACA;IACA,EACA;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AClQA;AAAA;AAAA;AAAA;AAAswC,CAAgB,4rCAAG,EAAC,C;;;;;;;;;;;ACA1xC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/hotelManage/components/employeeConmponent.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./employeeConmponent.vue?vue&type=template&id=5e232ee2&\"\nvar renderjs\nimport script from \"./employeeConmponent.vue?vue&type=script&lang=js&\"\nexport * from \"./employeeConmponent.vue?vue&type=script&lang=js&\"\nimport style0 from \"./employeeConmponent.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/hotelManage/components/employeeConmponent.vue\"\nexport default component.exports","export * from \"-!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./employeeConmponent.vue?vue&type=template&id=5e232ee2&\"","var components\ntry {\n  components = {\n    uniTable: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-table/components/uni-table/uni-table\" */ \"@/uni_modules/uni-table/components/uni-table/uni-table.vue\"\n      )\n    },\n    uniTr: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-table/components/uni-tr/uni-tr\" */ \"@/uni_modules/uni-table/components/uni-tr/uni-tr.vue\"\n      )\n    },\n    uniTh: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-table/components/uni-th/uni-th\" */ \"@/uni_modules/uni-table/components/uni-th/uni-th.vue\"\n      )\n    },\n    uniTd: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-table/components/uni-td/uni-td\" */ \"@/uni_modules/uni-table/components/uni-td/uni-td.vue\"\n      )\n    },\n    uniCollapse: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-collapse/components/uni-collapse/uni-collapse\" */ \"@/uni_modules/uni-collapse/components/uni-collapse/uni-collapse.vue\"\n      )\n    },\n    uniCollapseItem: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-collapse/components/uni-collapse-item/uni-collapse-item\" */ \"@/uni_modules/uni-collapse/components/uni-collapse-item/uni-collapse-item.vue\"\n      )\n    },\n    uniSection: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-section/components/uni-section/uni-section\" */ \"@/uni_modules/uni-section/components/uni-section/uni-section.vue\"\n      )\n    },\n    uniPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-popup/components/uni-popup/uni-popup\" */ \"@/uni_modules/uni-popup/components/uni-popup/uni-popup.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./employeeConmponent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./employeeConmponent.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"employee-component\">\n    <view class=\"add-content-style\" style=\"\">\n      <view>\n       \n        <button\n          class=\"uni-button\"\n          size=\"mini\"\n          type=\"primary\"\n          @click=\"addEmployee()\"\n        >\n          添加员工\n        </button>\n        </view>\n    </view>\n    <view v-if=\"isPcShow\">\n      <uni-table border stripe emptyText=\"暂无更多数据\">\n        <!-- 表头行 -->\n        <uni-tr>\n          <uni-th align=\"center\">用户手机</uni-th>\n          <uni-th align=\"center\">用户名</uni-th>\n          <uni-th align=\"center\">角色</uni-th>\n          <uni-th align=\"center\" width=\"200px\">操作</uni-th>\n        </uni-tr>\n        <!-- 表格数据行 -->\n        <uni-tr v-for=\"item of employeeList\">\n          <uni-td>{{ item.phone }}</uni-td>\n          <uni-td>{{ item.employee_name }}</uni-td>\n          <uni-td>{{ item.role == \"manager\" ? \"管理员\" : \"员工\" }}</uni-td>\n          <uni-td align=\"center\">\n            <view class=\"uni-group\">\n              <button\n                class=\"uni-button\"\n                @click=\"editEmployee(item)\"\n                size=\"mini\"\n                type=\"primary\"\n              >\n                修改\n              </button>\n              <button\n                class=\"uni-button\"\n                size=\"mini\"\n                type=\"warn\"\n                @click=\"deleteEmployee(item)\"\n                :loading=\"submitLoading\"\n              >\n                删除\n              </button>\n            </view>\n          </uni-td>\n        </uni-tr>\n      </uni-table>\n    </view>\n    <view class=\"phone-show-style\" style=\"max-width: 450px\" v-if=\"!isPcShow\">\n      <uni-collapse v-model=\"accordionVal\">\n        <uni-collapse-item v-for=\"item of employeeList\">\n          <template v-slot:title>\n            <uni-section\n              class=\"mb-10\"\n              :title=\"item.employee_name\"\n              type=\"circle\"\n              :sub-title=\"item.phone\"\n            >\n              <template v-slot:right>\n                <text style=\"font-weight: bold\">{{\n                  item.role == \"manager\" ? \"管理员\" : \"员工\"\n                }}</text>\n              </template>\n            </uni-section>\n          </template>\n          <view class=\"col-content\">\n            <view class=\"list\">\n              <view class=\"list-item\">\n                <view class=\"list-item-c\"\n                  ><text>员工姓名：</text><text>{{ item.employee_name }}</text></view\n                >\n              </view>\n              <view class=\"list-item\">\n                <view class=\"list-item-c\"\n                  ><text>角色：</text\n                  ><text style=\"font-weight: bold\">{{\n                    item.role == \"manager\" ? \"管理员\" : \"员工\"\n                  }}</text></view\n                >\n              </view>\n              <view class=\"list-item\" style=\"justify-content: flex-end\">\n                <view class=\"list-item-c\" style=\"width: 130px\">\n                  <button\n                    class=\"uni-button\"\n                    size=\"mini\"\n                    type=\"primary\"\n                    @click=\"editEmployee(item)\"\n                  >\n                    修改\n                  </button>\n                  <button\n                    class=\"uni-button\"\n                    size=\"mini\"\n                    type=\"warn\"\n                    @click=\"deleteEmployee(item)\"\n                    :loading=\"submitLoading\"\n                  >\n                    删除\n                  </button>\n                </view>\n              </view>\n            </view>\n          </view>\n        </uni-collapse-item>\n      </uni-collapse>\n    </view>\n    <uni-popup ref=\"popupCreateRoomType\" background-color=\"transprant\">\n      <view class=\"popup-content\">\n        <view class=\"create-order-title-style\">{{\n          type == 1 ? \"修改员工信息\" : \"新增员工\"\n        }}</view>\n        <view class=\"comContent\">\n          <addEmployeeComponent\n            @closePopup=\"closePopup\"\n            :type=\"type\"\n            :em=\"emObj\"\n          ></addEmployeeComponent>\n        </view>\n      </view>\n    </uni-popup>\n  </view>\n</template>\n\n<script>\nimport addEmployeeComponent from \"./addEmployeeComponent\";\nimport DB from \"../../../api/DB\";\nexport default {\n  components: {\n    addEmployeeComponent,\n  },\n  data() {\n    return {\n      submitLoading: false,\n      accordionVal: \"0\",\n      type: 0,\n      emObj: {}\n    };\n  },\n  computed: {\n    isPcShow() {\n      return this.$store.state.isPcShow;\n    },\n    hotel_id() {\n      return this.$store.state.hotel_id;\n    },\n    hotel() {\n      return this.$store.state.hotelList.find(\n        (item) => item._id == this.hotel_id\n      );\n    },\n    employeeList() {\n      return this.$store.state.employeeList;\n    },\n  },\n  created() {\n    console.log(\"employeeComponent>>>>>\");\n\n    this.getEmployeeList();\n  },\n  watch: {\n    hotel_id() {\n      this.getEmployeeList();\n    },\n  },\n  methods: {\n    sortRoomList(list) {},\n    getEmployeeList() {\n      uni.showLoading();\n      DB.getCollection(\"hm-employee\", {\n        hotel_id: this.hotel_id,\n      })\n        .then((res) => {\n          this.$store.commit(\"updateEmployeeList\", res.data);\n          uni.hideLoading();\n        })\n        .catch((err) => {\n          console.error(err);\n          uni.hideLoading();\n        });\n    },\n    editEmployee(em) {\n      this.emObj = em;\n      this.type = 1;\n      if (this.$store.state.isPcShow) {\n        this.$refs.popupCreateRoomType.open();\n        return;\n      }\n\n      uni.navigateTo({\n        url: `/pages/hotelManage/addEmployee/addEmployee?type=${\n          this.type\n        }&&em=${JSON.stringify(this.emObj)}`,\n      });\n    },\n    addEmployee() {\n      this.type = 0;\n      if (this.$store.state.isPcShow) {\n        this.$refs.popupCreateRoomType.open();\n        return;\n      }\n\n      uni.navigateTo({\n        url: `/pages/hotelManage/addEmployee/addEmployee`,\n      });\n    },\n    async deleteEmployee(em) {\n      const conf = await uni.showModal({\n        title: \"确认删除房型\",\n        content: \"删除后将无法恢复,确认删除吗?\",\n        cancelText: \"取消\",\n        confirmText: \"确认\",\n      });\n      if (conf[\"cancel\"]) {\n        return;\n      }\n      this.submitLoading = true;\n      uni.showLoading();\n      DB.callFunction(\"hm_deleteEmployee\", {\n        _id: em._id,\n        employee: em,\n      })\n        .then((res) => {\n          console.log(\"删除成功\");\n          this.$store.commit(\"getHotelList\");\n          this.submitLoading = false;\n          this.getEmployeeList();\n          \n        })\n        .catch((er) => {\n          console.log(\"删除失败\", er);\n          this.submitLoading = false;\n          uni.hideLoading();\n          uni.showModal({\n            content: \"系统异常，请稍候再试！\",\n            confirmText: \"确认\",\n          });\n        });\n    },\n    closePopup() {\n      this.$refs.popupCreateRoomType.close();\n    },\n    // getRoomTypeList(){\n    // \treturn uniCloud.callFunction({\n    // \t\tname:\"hm_getRoomType\",\n    // \t\tdata:{hotel_id:this.hotel_id}\n    // \t}).then(res=>{\n\n    // \t\tif(res.result.data.length){\n    // \t\t\tthis.$store.commit(\"updateRoomTypeList\",res.result.data[0].roomTypeList);\n    // \t\t}\n    // \t})\n    // }\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.add-content-style {\n  display: flex;\n  justify-content: flex-end;\n  padding: 0 20px;\n  box-sizing: border-box;\n}\n\n.uni-group {\n  display: flex;\n  justify-content: space-between;\n}\n\n.col-content {\n  /* background: linear-gradient(to bottom, #FFF, #EEF); */\n  border-radius: 4px;\n  padding: 0 20px;\n\n  .list {\n    display: flex;\n    flex-direction: column;\n\n    .list-item {\n      display: flex;\n      flex-direction: row;\n      justify-content: space-between;\n      padding: 10px 0;\n\n      .list-item-c {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./employeeConmponent.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./employeeConmponent.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1727784563495\n      var cssReload = require(\"D:/software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}